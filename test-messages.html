<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Sistema de Mensagens</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .success {
            color: green;
            font-weight: bold;
        }
        .error {
            color: red;
            font-weight: bold;
        }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste do Sistema de Mensagens</h1>
    <p>Esta p√°gina permite testar e configurar o sistema de mensagens do IF Wave.</p>

    <div class="section">
        <h2>üìã Status do LocalStorage</h2>
        <p id="status">Verificando...</p>
        <button onclick="checkStatus()">Verificar Status</button>
        <button onclick="clearData()">Limpar Dados</button>
    </div>

    <div class="section">
        <h2>üë• Usu√°rios de Teste</h2>
        <p>Adicionar usu√°rios fict√≠cios para testar o sistema de mensagens:</p>
        <button onclick="addTestUsers()">Adicionar Usu√°rios de Teste</button>
        <button onclick="addCurrentUser()">Definir Usu√°rio Atual</button>
        <div id="users-status"></div>
    </div>

    <div class="section">
        <h2>üí¨ Conversas de Teste</h2>
        <p>Adicionar conversas fict√≠cias para testar a interface:</p>
        <button onclick="addTestConversations()">Adicionar Conversas de Teste</button>
        <div id="conversations-status"></div>
    </div>

    <div class="section">
        <h2>üìä Dados Armazenados</h2>
        <button onclick="showData()">Mostrar Todos os Dados</button>
        <div id="data-display"></div>
    </div>

    <script>
        function checkStatus() {
            const users = JSON.parse(localStorage.getItem('ifwave_users') || '[]');
            const currentUser = JSON.parse(localStorage.getItem('ifwave_current_user') || 'null');
            const conversations = JSON.parse(localStorage.getItem('ifwave_conversations') || '[]');
            
            const status = document.getElementById('status');
            status.innerHTML = `
                <div class="success">‚úÖ Sistema Funcionando</div>
                <p><strong>Usu√°rios cadastrados:</strong> ${users.length}</p>
                <p><strong>Usu√°rio atual:</strong> ${currentUser ? currentUser.name : 'N√£o definido'}</p>
                <p><strong>Conversas ativas:</strong> ${conversations.length}</p>
            `;
        }

        function clearData() {
            localStorage.removeItem('ifwave_users');
            localStorage.removeItem('ifwave_current_user');
            localStorage.removeItem('ifwave_conversations');
            localStorage.removeItem('ifwave_blocked_users');
            document.getElementById('status').innerHTML = '<div class="success">‚úÖ Dados limpos com sucesso!</div>';
            setTimeout(checkStatus, 1000);
        }

        function addTestUsers() {
            const testUsers = [
                {
                    id: 'user1',
                    name: 'Ana Silva',
                    email: 'ana.silva@estudante.ifmt.edu.br',
                    course: 'An√°lise e Desenvolvimento de Sistemas',
                    campus: 'IFMT Campus Cuiab√°',
                    avatar: 'https://i.pravatar.cc/150?u=ana'
                },
                {
                    id: 'user2',
                    name: 'Carlos Oliveira',
                    email: 'carlos.oliveira@estudante.ifmt.edu.br',
                    course: 'Engenharia de Software',
                    campus: 'IFMT Campus V√°rzea Grande',
                    avatar: 'https://i.pravatar.cc/150?u=carlos'
                },
                {
                    id: 'user3',
                    name: 'Mariana Santos',
                    email: 'mariana.santos@estudante.ifmt.edu.br',
                    course: 'Sistemas de Informa√ß√£o',
                    campus: 'IFMT Campus Cuiab√°',
                    avatar: 'https://i.pravatar.cc/150?u=mariana'
                },
                {
                    id: 'user4',
                    name: 'Felipe Costa',
                    email: 'felipe.costa@estudante.ifmt.edu.br',
                    course: 'Ci√™ncia da Computa√ß√£o',
                    campus: 'IFMT Campus Rondon√≥polis',
                    avatar: 'https://i.pravatar.cc/150?u=felipe'
                },
                {
                    id: 'user5',
                    name: 'Juliana Rodrigues',
                    email: 'juliana.rodrigues@estudante.ifmt.edu.br',
                    course: 'An√°lise e Desenvolvimento de Sistemas',
                    campus: 'IFMT Campus Cuiab√°',
                    avatar: 'https://i.pravatar.cc/150?u=juliana'
                }
            ];

            localStorage.setItem('ifwave_users', JSON.stringify(testUsers));
            document.getElementById('users-status').innerHTML = '<div class="success">‚úÖ 5 usu√°rios de teste adicionados!</div>';
        }

        function addCurrentUser() {
            const currentUser = {
                id: 'current_user',
                name: 'Voc√™ (Usu√°rio Teste)',
                email: 'usuario.teste@estudante.ifmt.edu.br',
                course: 'An√°lise e Desenvolvimento de Sistemas',
                campus: 'IFMT Campus Cuiab√°',
                avatar: 'https://i.pravatar.cc/150?u=current'
            };

            localStorage.setItem('ifwave_current_user', JSON.stringify(currentUser));
            
            // Adicionar tamb√©m √† lista de usu√°rios
            const users = JSON.parse(localStorage.getItem('ifwave_users') || '[]');
            if (!users.find(u => u.id === currentUser.id)) {
                users.push(currentUser);
                localStorage.setItem('ifwave_users', JSON.stringify(users));
            }

            document.getElementById('users-status').innerHTML = '<div class="success">‚úÖ Usu√°rio atual definido!</div>';
        }

        function addTestConversations() {
            const conversations = [
                {
                    id: 'conv1',
                    userId: 'user1',
                    lastMessage: 'Oi! Como vai o projeto?',
                    lastMessageTime: '14:30',
                    timestamp: Date.now() - 1800000, // 30 min atr√°s
                    unreadCount: 2,
                    unread: true
                },
                {
                    id: 'conv2',
                    userId: 'user2',
                    lastMessage: 'Vamos estudar juntos para a prova?',
                    lastMessageTime: '13:45',
                    timestamp: Date.now() - 4500000, // 1h15 atr√°s
                    unreadCount: 0,
                    unread: false
                },
                {
                    id: 'conv3',
                    userId: 'user3',
                    lastMessage: 'Obrigada pela ajuda com o c√≥digo!',
                    lastMessageTime: 'Ontem',
                    timestamp: Date.now() - 86400000, // 1 dia atr√°s
                    unreadCount: 0,
                    unread: false
                }
            ];

            localStorage.setItem('ifwave_conversations', JSON.stringify(conversations));
            document.getElementById('conversations-status').innerHTML = '<div class="success">‚úÖ 3 conversas de teste adicionadas!</div>';
        }

        function showData() {
            const users = JSON.parse(localStorage.getItem('ifwave_users') || '[]');
            const currentUser = JSON.parse(localStorage.getItem('ifwave_current_user') || 'null');
            const conversations = JSON.parse(localStorage.getItem('ifwave_conversations') || '[]');
            
            document.getElementById('data-display').innerHTML = `
                <h3>Usu√°rios:</h3>
                <pre>${JSON.stringify(users, null, 2)}</pre>
                
                <h3>Usu√°rio Atual:</h3>
                <pre>${JSON.stringify(currentUser, null, 2)}</pre>
                
                <h3>Conversas:</h3>
                <pre>${JSON.stringify(conversations, null, 2)}</pre>
            `;
        }

        // Verificar status ao carregar a p√°gina
        window.onload = checkStatus;
    </script>
</body>
</html>
